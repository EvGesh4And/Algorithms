# Heap

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å. –î–∞–≤–∞–π —Ä–∞–∑–ª–æ–∂–∏–º –ø–æ –ø–æ–ª–æ—á–∫–∞–º.

---

## üí° –ß—Ç–æ —Ç–∞–∫–æ–µ Heap (–ö—É—á–∞)?

**Heap (–∫—É—á–∞)** ‚Äî —ç—Ç–æ **—Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö**, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ **–±–∏–Ω–∞—Ä–Ω–æ–º –¥–µ—Ä–µ–≤–µ**, —Å –¥–≤—É–º—è –≥–ª–∞–≤–Ω—ã–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏:

### 1. **–§–æ—Ä–º–∞ –¥–µ—Ä–µ–≤–∞** ‚Äî **–ø–æ–ª–Ω–æ–µ –±–∏–Ω–∞—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ**

* –í—Å–µ —É—Ä–æ–≤–Ω–∏, –∫—Ä–æ–º–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ, –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
* –ü–æ—Å–ª–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ

### 2. **–°–≤–æ–π—Å—Ç–≤–æ –∫—É—á–∏ (heap property)**:

* **Max-heap**: –∫–∞–∂–¥—ã–π —É–∑–µ–ª **‚â•** —Å–≤–æ–∏—Ö –¥–µ—Ç–µ–π (–∫–æ—Ä–µ–Ω—å ‚Äî –º–∞–∫—Å–∏–º—É–º)
* **Min-heap**: –∫–∞–∂–¥—ã–π —É–∑–µ–ª **‚â§** —Å–≤–æ–∏—Ö –¥–µ—Ç–µ–π (–∫–æ—Ä–µ–Ω—å ‚Äî –º–∏–Ω–∏–º—É–º)

---

## üì¶ –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä max-heap:

```
        10
       /  \
      5    3
     / \
    2   1
```

‚Üí –ö–∞–∂–¥—ã–π —Ä–æ–¥–∏—Ç–µ–ª—å –±–æ–ª—å—à–µ —Å–≤–æ–∏—Ö –ø–æ—Ç–æ–º–∫–æ–≤

### –ü—Ä–∏–º–µ—Ä min-heap:

```
        1
       / \
      4   3
     / \
    5   6
```

‚Üí –ö–∞–∂–¥—ã–π —Ä–æ–¥–∏—Ç–µ–ª—å –º–µ–Ω—å—à–µ —Å–≤–æ–∏—Ö –ø–æ—Ç–æ–º–∫–æ–≤

---

## üìê –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: –ø–æ—á–µ–º—É –º–∞—Å—Å–∏–≤?

–•–æ—Ç—è –∫—É—á—É –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –¥–µ—Ä–µ–≤–æ, **–æ–±—ã—á–Ω–æ –æ–Ω–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤–µ**, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ:

–î–ª—è —É–∑–ª–∞ –Ω–∞ –∏–Ω–¥–µ–∫—Å–µ `i`:

* –õ–µ–≤—ã–π –ø–æ—Ç–æ–º–æ–∫: `2*i + 1`
* –ü—Ä–∞–≤—ã–π –ø–æ—Ç–æ–º–æ–∫: `2*i + 2`
* –†–æ–¥–∏—Ç–µ–ª—å: `(i - 1) / 2` (—Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω–æ)

---

## üõ† –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫—É—á–∞?

* **Heap Sort** ‚Äî –∞–ª–≥–æ—Ä–∏—Ç–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
* **–û—á–µ—Ä–µ–¥—å —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º** (priority queue)
* **–ê–ª–≥–æ—Ä–∏—Ç–º—ã –Ω–∞ –≥—Ä–∞—Ñ–∞—Ö**, –Ω–∞–ø—Ä–∏–º–µ—Ä Dijkstra
* **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∏ –∑–∞–¥–∞—á**, —Ç–∞–π–º–µ—Ä—ã –∏ —Ç.–¥.

---

## üß† –ö—Ä–∞—Ç–∫–æ:

| –°–≤–æ–π—Å—Ç–≤–æ          | –ó–Ω–∞—á–µ–Ω–∏–µ               |
| ----------------- | ---------------------- |
| –¢–∏–ø               | –ü–æ–ª–Ω–æ–µ –±–∏–Ω–∞—Ä–Ω–æ–µ –¥–µ—Ä–µ–≤–æ |
| –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ     | –ú–∞—Å—Å–∏–≤                 |
| Max-heap          | –†–æ–¥–∏—Ç–µ–ª—å ‚â• –¥–µ—Ç–∏        |
| Min-heap          | –†–æ–¥–∏—Ç–µ–ª—å ‚â§ –¥–µ—Ç–∏        |
| –í—Å—Ç–∞–≤–∫–∞           | `O(log n)`             |
| –£–¥–∞–ª–µ–Ω–∏–µ –º–∞–∫—Å/–º–∏–Ω | `O(log n)`             |
| –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ        | `O(n)`                 |

---

Heap-—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–º–µ–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å **O(n log n)**, –ø–æ—Ç–æ–º—É —á—Ç–æ:

---

## üèóÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Heap Sort?

### üîß 1. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫—É—á–∏ (heapify) ‚Äî **O(n)**

–ß—Ç–æ–±—ã –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∞—Å—Å–∏–≤, —Å–Ω–∞—á–∞–ª–∞ –µ–≥–æ –Ω—É–∂–Ω–æ –ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –≤ **max-heap** (–∏–ª–∏ min-heap). –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –æ–ø–µ—Ä–∞—Ü–∏–∏ **"–ø—Ä–æ—Å–µ–∏–≤–∞–Ω–∏—è –≤–Ω–∏–∑"** (`sift down`) –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–æ–¥–∏—Ç–µ–ª—è –¥–æ –∫–æ—Ä–Ω—è. –≠—Ç–∞ —Ñ–∞–∑–∞:

* –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å `siftDown` –¥–ª—è –≤—Å–µ—Ö `n` —ç–ª–µ–º–µ–Ω—Ç–æ–≤;
* –ø–æ —Ñ–∞–∫—Ç—É —Ç—Ä–µ–±—É–µ—Ç –º–µ–Ω—å—à–µ –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞ –Ω–∏–∂–Ω–∏—Ö —É—Ä–æ–≤–Ω—è—Ö;
* —Å—É–º–º–∞—Ä–Ω–æ —Å—Ç—Ä–æ–∏—Ç—Å—è –∑–∞ **O(n)**, –∞ –Ω–µ O(n log n), –±–ª–∞–≥–æ–¥–∞—Ä—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–º—É –∞–Ω–∞–ª–∏–∑—É.

---

### üîÅ 2. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º—É–º–∞ + –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∞ –∫—É—á–∏ ‚Äî **O(n log n)**

–ó–∞—Ç–µ–º –º—ã:

1. –ú–µ–Ω—è–µ–º –º–µ—Å—Ç–∞–º–∏ –∫–æ—Ä–µ–Ω—å (–º–∞–∫—Å–∏–º—É–º) —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º;
2. –£–º–µ–Ω—å—à–∞–µ–º —Ä–∞–∑–º–µ—Ä –∫—É—á–∏;
3. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–≤–æ–π—Å—Ç–≤–æ –∫—É—á–∏ (`sift down` –Ω–∞ –∫–æ—Ä–Ω–µ).

–≠—Ç—É –æ–ø–µ—Ä–∞—Ü–∏—é –ø–æ–≤—Ç–æ—Ä—è–µ–º **n —Ä–∞–∑**, –∏ –∫–∞–∂–¥–∞—è `siftDown` –∑–∞–Ω–∏–º–∞–µ—Ç **O(log n)**, —Ç–∞–∫ –∫–∞–∫ –≥–ª—É–±–∏–Ω–∞ –∫—É—á–∏ = log n.

–ò—Ç–æ–≥:

$$
n \cdot O(\log n) = O(n \log n)
$$

---

### üß† –ò—Ç–æ–≥–æ–≤–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å:

* –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫—É—á–∏: **O(n)**
* –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∞: **O(n log n)**
* –û–±—â–∞—è:

  $$
  O(n) + O(n \log n) = O(n \log n)
  $$

---
